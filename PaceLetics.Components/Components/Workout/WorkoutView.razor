@using MudBlazor;
@using WorkoutModule.Contracts;
@using WorkoutModule.Enums;

@inject IDialogService dialogService

@if (Workout != null)
{

		<MudPaper Class="pa-4">
			<MudText Typo="Typo.h4"> @Workout.Name</MudText>
			<MudCarousel TData="object" AutoCycle="false" Class="mud-width-full" Style="height:600px;" ShowArrows="true" EnableSwipeGesture="true" ShowBullets="false" SelectedIndex="@_currentExercise">
				@foreach (var item in Workout.Exercises)
				{
					<MudCarouselItem>
						<ExerciseInfoView Exercise="item"></ExerciseInfoView>
					</MudCarouselItem>	
				}
			</MudCarousel>
			
		</MudPaper>
		
		<MudExpansionPanels>
			<MudExpansionPanel Text="Steuerung Anzeigen" MaxHeight="250">
			<MudGrid>
				<MudItem>
					@if (_elementType == WorkoutElements.Preparation)
					{
						<MudChart ChartOptions="@(new() { DisableLegend = true, ChartPalette = new[] { "#1F51FF", "0bba83ff" } })" ChartType="ChartType.Donut" Width="50px" Height="50px" @bind-SelectedIndex="_index" InputData="@_data">
							<CustomGraphics>
								<text class="donut-inner-text" x="47%" y="50%"
							  dominant-baseline="middle" text-anchor="middle" fill="white"
							  font-family="Helvetica" font-size="20">@_timeRemaining</text>
							</CustomGraphics>
						</MudChart>
					}

					else if (_elementType == WorkoutElements.Exercise && _exerciseState == ExerciseState.Running)
					{
						<MudChart ChartOptions="@(new() { DisableLegend = true, ChartPalette = new[] { "#FF3131", "0bba83ff" } })" ChartType="ChartType.Donut" Width="50px" Height="50px" @bind-SelectedIndex="_index" InputData="@_data">
							<CustomGraphics>
								<text class="donut-inner-text" x="47%" y="50%"
							  dominant-baseline="middle" text-anchor="middle"
							  fill="white" font-family="Helvetica" font-size="20">@_timeRemaining</text>
							</CustomGraphics>
						</MudChart>
					}
					else if (_elementType == WorkoutElements.Exercise && _exerciseState == ExerciseState.Switch)
					{

						<MudChart ChartOptions="@(new() { DisableLegend = true, ChartPalette = new[] { "#FF1493", "0bba83ff" } })" ChartType="ChartType.Donut" Width="50px" Height="50px" @bind-SelectedIndex="_index" InputData="@_data">
							<CustomGraphics>
								<text class="donut-inner-text" x="47%" y="50%"
							  dominant-baseline="middle" text-anchor="middle"
							  fill="white" font-family="Helvetica" font-size="20">@_timeRemaining</text>
							</CustomGraphics>
						</MudChart>
					}
					else if (_elementType == WorkoutElements.Rest && _exerciseState == ExerciseState.Running)
					{

						<MudChart ChartOptions="@(new() { DisableLegend = true, ChartPalette = new[] { "#39FF14", "0bba83ff" } })" ChartType="ChartType.Donut" Width="50px" Height="50px" @bind-SelectedIndex="_index" InputData="@_data">
							<CustomGraphics>
								<text class="donut-inner-text" x="47%" y="50%"
							  dominant-baseline="middle" text-anchor="middle"
							  fill="white" font-family="Helvetica" font-size="20">@_timeRemaining</text>
							</CustomGraphics>
						</MudChart>
					}
				</MudItem>
			</MudGrid>
			


		 </MudExpansionPanel>
		</MudExpansionPanels>

	


}


