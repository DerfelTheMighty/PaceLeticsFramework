@page "/Athletes/trainingpaces"

@using AthleteDataAccessLibrary
@using AthleteDataAccessLibrary.Contracts
@using Microsoft.AspNetCore.Components.Authorization
@using Microsoft.JSInterop
@using MudBlazor
@using PaceLetics.CoreModule.Components
@using PaceLetics.Web.Shared


@inject AuthenticationStateProvider GetAuthenticationStateAsync
@inject IAthleteData AthleteData
@inject IDialogService dialogService
@inject IJSRuntime JSRuntime

<PageTitle>Meine Pacebereiche</PageTitle>

<MudContainer Class="mt-16 px-8" MaxWidth="MaxWidth.Small">

    @if (_isLoading)
    {
        <LoadingScreen Label="Deine Daten werden geladen..." />
    }
    else
    {
        
        <MudPaper Class="pa-5 rounded-xl mb-6" Elevation="2">
            <MudStack Spacing="1">
                <MudText Typo="Typo.h4" Class="fw-bold">
                    Meine Pacebereiche
                </MudText>

                <MudText Typo="Typo.body1">
                    Deine berechneten Trainingsbereiche im Überblick.
                </MudText>
            </MudStack>
        </MudPaper>

        <MudStack Spacing="3">

            @if (_athlete?.Vdot < 1)
            {
                <MudAlert Severity="Severity.Warning">
                    Füge einen Einstufungslauf hinzu, damit wir deine optimale Trainingspace bestimmen können.
                </MudAlert>
            }

           
            <PaceInfo EPaceLow="@_lowerPace.Easy"
                      EPaceHigh="@_upperPace.Easy"
                      MPaceLow="@_lowerPace.Marathon"
                      MPaceHigh="@_upperPace.Marathon"
                      TPaceLow="@_lowerPace.Threshold"
                      TPaceHigh="@_upperPace.Threshold"
                      IPaceLow="@_lowerPace.Intervall"
                      IPaceHigh="@_upperPace.Intervall"
                      RPaceLow="@_lowerPace.Repetition"
                      RPaceHigh="@_upperPace.Repetition" />

        </MudStack>
    }

</MudContainer>