@page "/Workouts/workoutarea"
@using PaceLetics.WorkoutModule.CodeBase.Interfaces;
@using PaceLetics.WorkoutModule.CodeBase.Models;

@inject IWorkoutProvider woProvider;

<PageTitle>Deine Workout Area</PageTitle>

<MudContainer Class="pt-6 px-6 pb-8" MaxWidth="MaxWidth.Small">

    @if (_isLoading)
    {
        <LoadingScreen Label="Deine Daten werden geladen..." />
    }
    else
    {
        <PageHeader Title="Workout Area"
                    Subtitle="Wähle ein Workout und leg los." />

        <MudDivider Class="my-4" />

        <MudStack Spacing="3" AlignItems="AlignItems.Stretch">

            <MudText Typo="Typo.body1" Style="opacity:.8;">
                Willkommen in deiner Workoutarea! Hier findest du eine stetig wachsende Auswahl an verschiedenen Workouts.
                Leg los und starte ein Workout.
            </MudText>

            @if (_workoutPrevs is null || !_workoutPrevs.Any())
            {
                <MudText Typo="Typo.body2" Style="opacity:.7;">
                    Noch keine Workouts verfügbar.
                </MudText>
            }
            else
            {
                @foreach (var item in _workoutPrevs)
                {
                    <PaceLetics.WorkoutModule.Components.WorkoutPreviewElement Workout="@item" />
                }
            }

        </MudStack>
    }

</MudContainer>




@code {
    bool _isLoading;
    List<string> _workouts;
    List<WorkoutPreview> _workoutPrevs;


    protected override void OnInitialized()
    {
        _workoutPrevs = new List<WorkoutPreview>();
        _workouts = woProvider.GetWorkoutIds();
        foreach (var wo in _workouts)
        {
            _workoutPrevs.Add(woProvider.GetWorkoutPreview(wo));
        }
    }


    private async void OnExStart(IWorkoutElement el)
    {
        //if (el.Type == WorkoutModule.Enums.WorkoutElement.Exercise)
            //InvokeAsync(() =>
            //{
            //    _currentExercise = el as IExerciseInfo;
            //    StateHasChanged();
            //});
    }
}
