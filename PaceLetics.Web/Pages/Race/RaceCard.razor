@using CoreLibrary.Constants;
@using CoreLibrary.Models.Race;
@using MudBlazor;


<MudCard>
    <MudCardHeader>
        <CardHeaderContent>
            <MudExGrid>
                <MudAvatar>
                    <MudImage Src="@GetImagePath(Model?.Type)"></MudImage>
                </MudAvatar>
                <MudText>@Model?.Date.ToString("dd-MM-yyyy").Replace("-",".")</MudText>
            </MudExGrid>
        </CardHeaderContent>
        <CardHeaderActions>
            <MudIconButton Icon="@Icons.Material.Filled.Edit" Color="Color.Info" OnClick="OnEditRaceCard"/>
        </CardHeaderActions>
    </MudCardHeader>
    <MudCardContent>
        <MudText>@Model?.Id</MudText>
        <MudText>
            Ergebnis: <b>@Model?.Time.ToString()</b>
        </MudText>
    </MudCardContent>
</MudCard>

@code {
    [Parameter]
    public RaceResultModel? Model { get; set; }

    [Parameter]
    public EventCallback OnEditRaceCard { get; set; }

    private async Task HandleEditCard()
    {
        await OnEditRaceCard.InvokeAsync();
    }

    private string GetImagePath(string type)
    {
        var imagePath = "images/icons/epace.png"; // default image
        switch (type)
        {
            case RaceKeys.D1k: imagePath = "images/icons/icon_1k.png"; break;
            case RaceKeys.D3k: imagePath = "images/icons/icon_3k.png"; break;
            case RaceKeys.D5k: imagePath = "images/icons/icon_5k.png"; break;
            case RaceKeys.D10k: imagePath = "images/icons/icon_10k.png"; break;
            case RaceKeys.D15k: imagePath = "images/icons/icon_15k.png"; break;
            case RaceKeys.D21k: imagePath = "images/icons/icon_21k.png"; break;
            default: imagePath = "images/icons/icon_3k.png"; break;
        }
        return imagePath;
    }

}