@using MudBlazor
@using PaceLetics.RunningModule.CodeBase.Models

@namespace PaceLetics.RunningModule.Components


<MudCard Elevation="@(IsHighlighted ? 8 : 2)"
         Style="min-width:320px; width:100%; overflow:hidden; margin-left:8px;">
    <MudCardContent Style="padding:12px 16px;">

        <MudStack>

            <MudStack Row="true"
                      AlignItems="AlignItems.Center"
                      JustifyContent="JustifyContent.SpaceBetween">
                <MudText Typo="Typo.caption" Color="Color.Secondary">
                    @Session.Date.ToString("dd.MM.yyyy")
                </MudText>

                <MudChip T="string" Size="Size.Small"
                         Variant="Variant.Outlined"
                         Color="@TypeColor">
                    @TypeLabel
                </MudChip>
            </MudStack>


            <MudText Typo="Typo.subtitle2"
                     Style="overflow:hidden; text-overflow:ellipsis; white-space:nowrap;">
                @Session.Id
            </MudText>

            <MudText Typo="Typo.caption" Color="Color.Secondary">
                @($"{Session.TotalDistance / 1000.0:0.0} km")
            </MudText>

        </MudStack>

    </MudCardContent>
</MudCard>

@code {
    [Parameter, EditorRequired] public RunningSession Session { get; set; } = default!;
    [Parameter] public bool IsHighlighted { get; set; }

    private bool IsInterval =>
        Session.Sequence.Any(s => s.Type == SegmentType.Intervall);

    private string TypeLabel => IsInterval ? "Interval" : "Run";

    private Color TypeColor => IsInterval ? Color.Error : Color.Success;
}