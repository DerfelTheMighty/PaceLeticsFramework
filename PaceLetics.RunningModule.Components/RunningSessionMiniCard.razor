@using MudBlazor
@using PaceLetics.RunningModule.CodeBase.Models
@namespace PaceLetics.RunningModule.Components

<MudCard Elevation="0"
         Style="
            background-color: transparent;
            border: none;
            min-width:320px;
            width:100%;
            margin-left:8px;
         ">
    <MudCardContent Style="padding:12px 16px;">

        <MudStack Spacing="1">

            <MudChip T="string" Size="Size.Small"
                     Variant="Variant.Outlined"
                     Color="@TypeColor"
                     Style="width:fit-content;">
                @TypeLabel
            </MudChip>

            <MudText Typo="Typo.caption" Color="@TextColor">
                @Session.Date.ToString("dd.MM.yyyy")
            </MudText>

			<MudText Typo="Typo.subtitle2" Color="@TextColor"
                     Style="overflow:hidden; text-overflow:ellipsis; white-space:nowrap;">
                @Session.Name
            </MudText>

            <MudText Typo="Typo.caption" Color="@TextColor">
                @($"{Session.TotalDistance / 1000.0:0.0} km")
            </MudText>

        </MudStack>

    </MudCardContent>

</MudCard>

@code {
    [Parameter, EditorRequired] public RunningSession Session { get; set; } = default!;
    [Parameter] public bool IsHighlighted { get; set; }

    private bool IsInterval =>
        Session.Sequence.Any(s => s.Type == SegmentType.Intervall);

    private string TypeLabel => IsInterval ? "Interval" : "Run";

	private Color TextColor => IsHighlighted ? Color.Primary : Color.Inherit;

    private Color TypeColor => IsInterval ? Color.Error : Color.Success;

}